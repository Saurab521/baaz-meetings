<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Baaz Bike — Meeting Rooms</title>
  <style>
    /* Theme variables */
    :root{
      --brand-orange: #ff6a00; /* change if needed */
      --black: #0b0b0b;
      --white: #ffffff;
      --muted: #6b7280;
      --card-bg: #fff;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Page */
    body{
      margin:0;
      padding:20px;
      background: linear-gradient(180deg,#fff 0%, #fbfbfb 100%);
      color:var(--black);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* Header with logo + name */
    header{
      display:flex;
      align-items:center;
      gap:14px;
      margin-bottom:18px;
      background: linear-gradient(90deg, rgba(255,106,0,0.06), rgba(0,0,0,0));
      padding:12px;
      border-radius:12px;
      box-shadow: 0 6px 18px rgba(11,11,11,0.04);
    }

    /* Logo container */
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      cursor:default;
    }
    .logo{
      width:56px;
      height:56px;
      min-width:56px;
      border-radius:10px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg,var(--brand-orange), #ff8f3b);
      box-shadow: 0 6px 18px rgba(255,106,0,0.18), inset 0 -6px 14px rgba(0,0,0,0.06);
      transform-origin:center;
      animation: logo-breathe 3s ease-in-out infinite;
    }
    @keyframes logo-breathe{
      0%{ transform: translateY(0) scale(1); }
      50%{ transform: translateY(-3px) scale(1.02); }
      100%{ transform: translateY(0) scale(1); }
    }

    .brand h1{
      font-size:18px;
      margin:0;
      color:var(--black);
      line-height:1;
    }
    .brand p{
      margin:0;
      font-size:12px;
      color:var(--muted);
    }

    /* Clock & status */
    #clock{ margin-left:auto; color:var(--muted); font-size:13px; }

    /* Grid & cards */
    .grid{
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
      gap:12px;
      margin-top:12px;
    }
    .room{
      background: var(--card-bg);
      border-radius:12px;
      padding:14px;
      box-shadow: 0 8px 24px rgba(11,11,11,0.04);
      transition: transform 180ms ease, box-shadow 180ms ease;
      border: 1px solid rgba(11,11,11,0.04);
    }
    .room:hover{ transform: translateY(-6px); box-shadow: 0 18px 40px rgba(11,11,11,0.06); }

    .title{ font-weight:700; margin-bottom:6px; font-size:15px; color:var(--black); }
    .status{ display:inline-block; padding:6px 10px; border-radius:999px; font-size:13px; font-weight:600; }
    .free{ background: #f0fff4; color: #065f46; box-shadow: inset 0 -4px 12px rgba(6,95,70,0.03);}
    .busy{ background: #fff7f0; color: #7a1b1b; box-shadow: inset 0 -4px 12px rgba(122,27,27,0.03); }

    .listBtn{
      margin-top:10px;
      display:inline-block;
      background: var(--brand-orange);
      color:var(--white);
      padding:8px 12px;
      border-radius:10px;
      text-decoration:none;
      font-weight:600;
      box-shadow: 0 8px 18px rgba(255,106,0,0.16);
      transition: transform 140ms ease, box-shadow 140ms ease, opacity 140ms;
    }
    .listBtn:active{ transform: translateY(1px) scale(0.997); }
    .details{ margin-top:12px; font-size:14px; color:#2d2d2d; }

    .error{
      background:#fff0f0;
      color:#9b1c1c;
      padding:10px;
      border-radius:8px;
      margin-bottom:12px;
      display:none;
      border:1px solid rgba(155,28,28,0.08);
    }

    footer{
      margin-top:18px;
      font-size:13px;
      color:var(--muted);
      text-align:center;
    }

    /* small screens */
    @media (max-width:520px){
      body{ padding:12px; }
      .brand h1{ font-size:16px; }
      .logo{ width:48px; height:48px; min-width:48px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="brand" title="Baaz Bike">
      <!-- Placeholder SVG logo: replace with your image if you have one -->
      <div class="logo" aria-hidden="true">
        <!-- Simple 'B' + bike wing mark in white -->
        <svg width="36" height="36" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Baaz Bike logo">
          <rect width="64" height="64" rx="12" fill="none"/>
          <g transform="translate(6,6)" fill="#ffffff">
            <path d="M10 30c0-6.627 5.373-12 12-12s12 5.373 12 12-5.373 12-12 12S10 36.627 10 30z" opacity="0.16"/>
            <path d="M38 22c-1.333-2.667-4.333-4-7-4h-9c-3.314 0-6 2.686-6 6v6" />
            <path d="M14 38c0 3.314 2.686 6 6 6s6-2.686 6-6" />
            <path d="M42 28l6-4-6-4" />
            <text x="8" y="30" font-size="16" font-weight="700" fill="#ffffff" font-family="Arial, sans-serif">B</text>
          </g>
        </svg>
      </div>

      <div>
        <h1>Baaz Bike</h1>
        <p>Meeting Rooms Dashboard</p>
      </div>
    </div>

    <div id="clock" aria-hidden="false"></div>
  </header>

  <div id="error" class="error" role="alert"></div>

  <main>
    <div id="rooms" class="grid" aria-live="polite" aria-label="Meeting rooms list"></div>
  </main>

  <footer>Demo frontend — backend se connect karne ke liye <code>API_URL</code> change karo.</footer>

  <script>
    (function(){
      function logErr(msg, err){
        console.error(msg, err);
        const el = document.getElementById('error');
        el.style.display = 'block';
        el.textContent = msg + (err && err.message ? ' — ' + err.message : '');
      }

      // Mock fallback data
      const MOCK = [
        { id: 1, name: "Conference A", status: "free", meetings: [] },
        { id: 2, name: "Board Room", status: "busy", meetings: [
            { start: "09:00", end: "10:00", title: "Sales Sync", organizer: "Ritu" },
            { start: "14:00", end: "15:30", title: "Product Review", organizer: "Amit" }
          ]
        },
        { id: 3, name: "Focus Room 1", status: "free", meetings: [] },
        { id: 4, name: "Focus Room 2", status: "busy", meetings: [
            { start: "11:00", end: "12:00", title: "Interview", organizer: "HR Team" }
          ]
        }
      ];

      // Replace with your backend endpoint if ready
      const API_URL = 'http://192.168.1.41:8000/api/rooms'; // e.g. 'https://your-backend.example.com/api/rooms'

      function renderRooms(data){
        const container = document.getElementById('rooms');
        container.innerHTML = '';
        data.forEach(room => {
          const div = document.createElement('div');
          div.className = 'room';
          div.innerHTML = `
            <div class="title">${escapeHtml(room.name)}</div>
            <div>
              <span class="status ${room.status === 'free' ? 'free' : 'busy'}">
                ${room.status === 'free' ? 'Free' : 'Busy'}
              </span>
            </div>
            <a href="#" class="listBtn" data-id="${room.id}">Today's meetings</a>
            <div class="details" id="details-${room.id}" aria-hidden="true"></div>
          `;
          container.appendChild(div);
        });

        container.querySelectorAll('.listBtn').forEach(btn=>{
          btn.addEventListener('click', function(e){
            e.preventDefault();
            const id = this.dataset.id;
            toggleDetails(Number(id));
          });
        });
      }

      function toggleDetails(id){
        const details = document.getElementById('details-'+id);
        if(!details) return;
        if(details.getAttribute('aria-hidden') === 'false'){
          details.setAttribute('aria-hidden','true');
          details.innerHTML = '';
          return;
        }
        const room = currentData.find(r=>r.id===id);
        if(!room){ details.innerHTML = 'No data for this room.'; details.setAttribute('aria-hidden','false'); return; }
        if(!room.meetings || room.meetings.length===0){
          details.innerHTML = '<em>No meetings today</em>';
          details.setAttribute('aria-hidden','false');
          return;
        }
        const ul = document.createElement('div');
        ul.innerHTML = room.meetings.map(m=>`<div style="margin-bottom:8px"><strong>${escapeHtml(m.title)}</strong><div style="font-size:13px;color:#444">${escapeHtml(m.start)} - ${escapeHtml(m.end)} · ${escapeHtml(m.organizer)}</div></div>`).join('');
        details.innerHTML = '';
        details.appendChild(ul);
        details.setAttribute('aria-hidden','false');
      }

      function escapeHtml(s){
        if(!s) return '';
        return String(s).replace(/[&<>"']/g, function(m){ return {'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]; });
      }

      let currentData = [];

      async function loadData(){
        try{
          if(!API_URL){
            currentData = MOCK;
            renderRooms(currentData);
            return;
          }
          const res = await fetch(API_URL, { method: 'GET', credentials: 'include' });
          if(!res.ok) throw new Error('Network response not OK: ' + res.status);
          const json = await res.json();
          if(!Array.isArray(json)) throw new Error('Expected array from API');
          currentData = json;
          renderRooms(currentData);
        } catch(err){
          logErr('Could not load from backend; using demo data', err);
          currentData = MOCK;
          renderRooms(currentData);
        }
      }

      // clock
      function updateClock(){
        const c = document.getElementById('clock');
        const now = new Date();
        c.textContent = now.toLocaleString();
      }
      setInterval(updateClock, 1000);
      updateClock();

      document.addEventListener('DOMContentLoaded', function(){
        try{ loadData(); } catch(e){ logErr('Unexpected UI init error', e); }
      });
    })();
  </script>
</body>
</html>
